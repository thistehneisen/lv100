function getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}function ResizeCanvas(e){if(canvas.width=window.innerWidth,canvas.height=window.innerHeight,window.devicePixelRatio>1){var n=canvas.width,o=canvas.height;canvas.width=n*window.devicePixelRatio,canvas.height=o*window.devicePixelRatio,canvas.style.width=n,canvas.style.height=o,context.scale(window.devicePixelRatio,window.devicePixelRatio)}}function Initialize(){window.addEventListener("resize",ResizeCanvas,!1),ResizeCanvas()}function addNewSquare(e,n,o,i,t,a,r){void 0===i&&(i=colors[Math.floor(Math.random()*colors.length)]),void 0===r&&(r=0),void 0===t&&(t=(Math.random()*(2*VELOCITY)-VELOCITY)*o),void 0===a&&(a=(Math.random()*(2*VELOCITY)-VELOCITY)*o),particles.push({x:e,y:n,vx:t,vy:a,color:i,letitroll:0,protect:r})}function getNewRandomOutherCoords(){xcoo=getRandomInt(-100,window.innerWidth+100),ycoo=getRandomInt(-100,window.innerHeight+100)}function checkPixcelCount(){var e=particles.length;if(e<COUNT){for(getNewRandomOutherCoords();xcoo>sideLen*-5&&xcoo<window.innerWidth+5*sideLen&&ycoo>sideLen*-5&&ycoo<window.innerHeight+5*sideLen;)getNewRandomOutherCoords();vxs=Math.random()*(2*VELOCITY),xcoo>Math.round(window.innerWidth/2)&&(vxs*=-1),vys=Math.random()*(2*VELOCITY),ycoo>Math.round(window.innerHeight/2)&&(vys*=-1);var n=symbolFuncs[Math.floor(Math.random()*symbolFuncs.length)];window[n](xcoo,ycoo,sideLen,1,vxs,vys,1)}}function TimeUpdate(e){context.clearRect(0,0,window.innerWidth,window.innerHeight);for(var n=particles.length,o,i=0;i<n;i++)if(o=particles[i],void 0!==o){if(o.x+=o.vx,o.y+=o.vy,(o.x+sideLen>window.innerWidth||o.x-sideLen<0)&&1!=o.protect)if(1==o.letitroll||Math.round(10*Math.random())<2){if(o.letitroll=1,o.x-sideLen>window.innerWidth||o.x+sideLen<0){particles.splice(i,1);continue}}else o.vx=o.vx*-1;if(1!=o.protect&&(Math.abs(o.vx)<VELOCITY?o.vx*=1.1:Math.abs(o.vx)<1.1*VELOCITY&&(o.vx*=1+2*Math.random())),(o.y+sideLen>window.innerHeight||o.y-sideLen<0)&&1!=o.protect)if(1==o.letitroll||Math.round(10*Math.random())<2){if(o.letitroll=1,o.y-sideLen>window.innerHeight||o.y+sideLen<0){particles.splice(i,1);continue}}else o.vy=o.vy*-1;1!=o.protect&&(Math.abs(o.vy)<VELOCITY?o.vy*=1.1:Math.abs(o.vy)<1.1*VELOCITY&&(o.vy*=1+2*Math.random())),1==o.protect&&o.x>150&&o.x<window.innerWidth-150&&o.y>150&&o.y<window.innerHeight-150&&Math.round(1e3*Math.random())<25&&(o.protect=0,o.vx=Math.random()*(2*VELOCITY)-VELOCITY,o.vy=Math.random()*(2*VELOCITY)-VELOCITY),1==o.protect&&(o.x<-200||o.x>window.innerWidth+200||o.y<-200||o.y>window.innerHeight+200)?particles.splice(i,1):(context.strokeStyle=context.fillStyle=o.color,context.beginPath(),context.moveTo(o.x-sideLen,o.y),context.lineTo(o.x,o.y+sideLen),context.lineTo(o.x+sideLen,o.y),context.lineTo(o.x,o.y-sideLen),context.closePath(),context.stroke(),context.fill())}checkRound++,25==checkRound&&(checkPixcelCount(),checkRound=0),window.requestAnimationFrame(TimeUpdate)}function drawZalktis(e,n,o,i,t,a,r){var c=[{x:e,y:n},{x:e-o,y:n-o},{x:e-2*o,y:n-2*o},{x:e-3*o,y:n-o},{x:e-4*o,y:n},{x:e-3*o,y:n+o},{x:e-2*o,y:n+2*o},{x:e+o,y:n+o},{x:e+2*o,y:n+2*o},{x:e+3*o,y:n+o},{x:e+4*o,y:n},{x:e+3*o,y:n-o},{x:e+2*o,y:n-2*o}];drawCoords(c,i,t,a,r)}function drawOrnament1(e,n,o,i,t,a,r){var c=colors[Math.floor(Math.random()*colors.length)],d=colors[Math.floor(Math.random()*colors.length)],s=colors[Math.floor(Math.random()*colors.length)],x=[{x:e-o,y:n-3*o,c:c},{x:e+o,y:n-3*o,c:c},{x:e,y:n-2*o,c:c},{x:e-3*o,y:n-o,c:d},{x:e-o,y:n-o,c:s},{x:e+o,y:n-o,c:s},{x:e+3*o,y:n-o,c:d},{x:e-2*o,y:n,c:c},{x:e+2*o,y:n,c:c},{x:e-3*o,y:n+o,c:s},{x:e-o,y:n+o,c:d},{x:e+o,y:n+o,c:d},{x:e+3*o,y:n+o,c:s},{x:e,y:n+2*o,c:c},{x:e-o,y:n+3*o,c:c},{x:e+o,y:n+3*o,c:c}];drawCoords(x,i,t,a,r)}function drawJumis(e,n,o,i,t,a,r){var c=[{x:e,y:n},{x:e-o,y:n+o},{x:e-2*o,y:n+2*o},{x:e-3*o,y:n+3*o},{x:e-4*o,y:n+4*o},{x:e-5*o,y:n+5*o},{x:e-o,y:n-o},{x:e-2*o,y:n-2*o},{x:e-3*o,y:n-3*o},{x:e-4*o,y:n-4*o},{x:e-5*o,y:n-3*o},{x:e-6*o,y:n-2*o},{x:e+o,y:n+o},{x:e+2*o,y:n+2*o},{x:e+3*o,y:n+3*o},{x:e+4*o,y:n+4*o},{x:e+5*o,y:n+5*o},{x:e+o,y:n-o},{x:e+2*o,y:n-2*o},{x:e+3*o,y:n-3*o},{x:e+4*o,y:n-4*o},{x:e+5*o,y:n-3*o},{x:e+6*o,y:n-2*o}];drawCoords(c,i,t,a,r)}function drawCoords(e,n,o,i,t){for(var a=e.length,r=0;r<a;r++)void 0===e[r].c&&(e[r].c=colors[Math.floor(Math.random()*colors.length)]),e[r].protect=0,(e[r].x<0||e[r].y<0)&&(e[r].protect=1),addNewSquare(e[r].x,e[r].y,n,e[r].c,o,i,t)}var VELOCITY=.18,COUNT=50,PERCENT_COVERAGE=6,PERCENT_SINGLESQUARES_INIT=50,sideLen=3,particles=[],ornaments=[],colors=["#FFCF00","#36C038","#24BADF","#004D9E","#EF4700"],symbolFuncs=["drawZalktis","drawOrnament1","drawJumis"],canvas=document.getElementById("projector"),context=canvas.getContext("2d");if(window.devicePixelRatio>1){var canvasWidth=canvas.width,canvasHeight=canvas.height;canvas.width=canvasWidth*window.devicePixelRatio,canvas.height=canvasHeight*window.devicePixelRatio,canvas.style.width=canvasWidth,canvas.style.height=canvasHeight,context.scale(window.devicePixelRatio,window.devicePixelRatio)}var xcoo,ycoo,checkCountIntervar,zimetBackground,checkRound=0,isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};if(canvas&&canvas.getContext){context=canvas.getContext("2d"),isMobile.any()&&(sideLen=2,ResizeCanvas());var vajagPx=window.innerWidth*window.innerHeight*(.001*PERCENT_COVERAGE);COUNT=Math.round(vajagPx/(sideLen*sideLen*2));for(var i=0;i<Math.round(COUNT*(.01*PERCENT_SINGLESQUARES_INIT));i++){for(xcoo=0;xcoo<sideLen;)xcoo=Math.random()*(window.innerWidth-sideLen);for(ycoo=0;ycoo<sideLen;)ycoo=Math.random()*(window.innerHeight-sideLen);addNewSquare(xcoo,ycoo,1)}setTimeout(function(){Initialize()},100)}window.requestAnimationFrame(TimeUpdate);